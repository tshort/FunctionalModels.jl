<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Analog electrical models · Sims.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Sims.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../basics/">Basics</a></li><li><a class="tocitem" href="../../sims/">API</a></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../types/">The Sims standard library</a></li><li><a class="tocitem" href="../blocks/">Control and signal blocks</a></li><li class="is-active"><a class="tocitem" href>Analog electrical models</a><ul class="internal"><li><a class="tocitem" href="#Basics"><span>Basics</span></a></li><li><a class="tocitem" href="#Ideal"><span>Ideal</span></a></li><li><a class="tocitem" href="#Semiconductors"><span>Semiconductors</span></a></li><li><a class="tocitem" href="#Sources"><span>Sources</span></a></li><li><a class="tocitem" href="#Utilities"><span>Utilities</span></a></li></ul></li><li><a class="tocitem" href="../heat_transfer/">Heat transfer models</a></li><li><a class="tocitem" href="../rotational/">Rotational mechanics</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/lib/">Sims.Lib</a></li></ul></li><li><a class="tocitem" href="../../NEWS/">Release notes</a></li><li><a class="tocitem" href="../../LICENSE/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Analog electrical models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Analog electrical models</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tshort/Sims.jl/blob/master/docs/src/lib/electrical.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><ul><li><a href="#Analog-electrical-models">Analog electrical models</a></li><ul><li><a href="#Basics">Basics</a></li><ul><li><a href="#Resistor">Resistor</a></li><li><a href="#Capacitor">Capacitor</a></li><li><a href="#Inductor">Inductor</a></li><li><a href="#SaturatingInductor">SaturatingInductor</a></li><li><a href="#Transformer">Transformer</a></li><li><a href="#EMF">EMF</a></li></ul><li><a href="#Ideal">Ideal</a></li><ul><li><a href="#IdealDiode">IdealDiode</a></li><li><a href="#IdealThyristor">IdealThyristor</a></li><li><a href="#IdealOpAmp">IdealOpAmp</a></li><li><a href="#IdealOpeningSwitch">IdealOpeningSwitch</a></li><li><a href="#IdealClosingSwitch">IdealClosingSwitch</a></li><li><a href="#ControlledIdealOpeningSwitch">ControlledIdealOpeningSwitch</a></li><li><a href="#ControlledIdealClosingSwitch">ControlledIdealClosingSwitch</a></li></ul><li><a href="#Semiconductors">Semiconductors</a></li><ul><li><a href="#Diode">Diode</a></li><li><a href="#ZDiode">ZDiode</a></li></ul><li><a href="#Sources">Sources</a></li><ul><li><a href="#SignalVoltage">SignalVoltage</a></li><li><a href="#SineVoltage">SineVoltage</a></li><li><a href="#StepVoltage">StepVoltage</a></li><li><a href="#SignalCurrent">SignalCurrent</a></li></ul><li><a href="#Utilities">Utilities</a></li><ul><li><a href="#SeriesProbe">SeriesProbe</a></li><li><a href="#BranchHeatPort">BranchHeatPort</a></li></ul></ul></ul><h1 id="Analog-electrical-models"><a class="docs-heading-anchor" href="#Analog-electrical-models">Analog electrical models</a><a id="Analog-electrical-models-1"></a><a class="docs-heading-anchor-permalink" href="#Analog-electrical-models" title="Permalink"></a></h1><p>This library of components is modeled after the Modelica.Electrical.Analog library.</p><p>Voltage nodes with type <code>Voltage</code> are the main Unknown type used in electrical circuits. <code>voltage</code> nodes can be single floating point unknowns representing a single voltage node. A <code>Voltage</code> can also be an array representing multiphase circuits or multiple node positions. Lastly, <code>Voltage</code> unknowns can also be complex for use with quasiphasor-type solutions.</p><p>The type <code>ElectricalNode</code> is a Union type that can be an Array, a number, an expression, or an Unknown. This is used in model functions to allow passing a <code>Voltage</code> node or a real value (like 0.0 for ground).</p><p><strong>Example</strong></p><pre><code class="language-julia">function ex_ChuaCircuit()
    @variables n1(t) n2(t) n3(t) = 4.0
    g = 0.0
    function NonlinearResistor(n1::ElectricalNode, n2::ElectricalNode; Ga, Gb, Ve)
        i = Current(compatible_values(n1, n2))
        v = Voltage(compatible_values(n1, n2))
        [
            Branch(n1, n2, v, i)
            i = ifelse(v &lt; -Ve, Gb .* (v + Ve) - Ga .* Ve,
                       ifelse(v &gt; Ve, Gb .* (v - Ve) + Ga*Ve, Ga*v))
        ]
    end
    [
        Resistor(n1, g,  R = 12.5e-3) 
        Inductor(n1, n2, L = 18.0)
        Resistor(n2, n3, R = 1 / 0.565) 
        Capacitor(n2, g, C = 100.0)
        Capacitor(n3, g, C = 10.0)
        NonlinearResistor(n3, g, Ga = -0.757576, Gb = -0.409091, Ve = 1.0)
    ]
end
</code></pre><h2 id="Basics"><a class="docs-heading-anchor" href="#Basics">Basics</a><a id="Basics-1"></a><a class="docs-heading-anchor-permalink" href="#Basics" title="Permalink"></a></h2><h3 id="Resistor"><a class="docs-heading-anchor" href="#Resistor">Resistor</a><a id="Resistor-1"></a><a class="docs-heading-anchor-permalink" href="#Resistor" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.Resistor" href="#Sims.Lib.Resistor"><code>Sims.Lib.Resistor</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The linear resistor connects the branch voltage <code>v</code> with the branch current <code>i</code> by <code>i*R = v</code>. The Resistance <code>R</code> is allowed to be positive, zero, or negative. </p><pre><code class="language-julia">Resistor(n1::ElectricalNode, n2::ElectricalNode; 
         R = 1.0, T = 293.15, T_ref = 300.15, alpha = 0.0)
Resistor(n1::ElectricalNode, n2::ElectricalNode, hp::HeatPort; 
         R = 1.0, T = 293.15, T_ref = 300.15, alpha = 0.0)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>R::Signal</code> : Resistance at temperature <code>T_ref</code> [ohms], default = 1.0 ohms</li><li><code>hp::HeatPort</code> : Heat port [K], optional                </li><li><code>T::HeatPort</code> : Fixed device temperature or HeatPort [K], default = <code>T_ref</code></li><li><code>T_ref::Signal</code> : Reference temperature [K], default = 300.15K</li><li><code>alpha::Signal</code> : Temperature coefficient of resistance (<code>R_actual = R*(1 + alpha*(T_heatPort - T_ref))</code>) [1/K], default = 0.0</li></ul><p><strong>Details</strong></p><p>The resistance <code>R</code> is optionally temperature dependent according to the following equation:</p><pre><code class="language-none">R = R_ref*(1 + alpha*(hp.T - T_ref))</code></pre><p>With the optional <code>hp</code> HeatPort argument, the power will be dissipated into this HeatPort.</p><p>The resistance <code>R</code> can be a constant numeric value or an Unknown, meaning it can vary with time. <em>Note</em>: it is recommended that the R signal should not cross the zero value. Otherwise, depending on the surrounding circuit, the probability of singularities is high.</p><p>This device is vectorizable using array inputs for one or both of <code>n1</code> and <code>n2</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">function model()
    @variables n1
    g = 0.0
    [
        :vsrc =&gt; SineVoltage(n1, g, V = 100.0)
        :r1   =&gt; Resistor(n1, g, R = 3.0, T = 330.0, alpha = 1.0)
    ]
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L62-L117">source</a></section></article><h3 id="Capacitor"><a class="docs-heading-anchor" href="#Capacitor">Capacitor</a><a id="Capacitor-1"></a><a class="docs-heading-anchor-permalink" href="#Capacitor" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.Capacitor" href="#Sims.Lib.Capacitor"><code>Sims.Lib.Capacitor</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The linear capacitor connects the branch voltage <code>v</code> with the branch current <code>i</code> by <code>i = C * dv/dt</code>. </p><pre><code class="language-julia">Capacitor(n1::ElectricalNode, n2::ElectricalNode; C::Signal) </code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>C::Signal</code> : Capacitance [F]</li></ul><p><strong>Details</strong></p><p><code>C</code> can be a constant numeric value or an Unknown, meaning it can vary with time. If <code>C</code> is a constant, it may be positive, zero, or negative. If <code>C</code> is a signal, it should be greater than zero.</p><p>This device is vectorizable using array inputs for one or both of <code>n1</code> and <code>n2</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">function model()
    @variables n1(t)
    g = 0.0
    [
        SineVoltage(n1, g, V = 100.0)
        Resistor(n1, g, R = 3.0)
        Capacitor(n1, g, C = 1.0)
    ]
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L134-L173">source</a></section></article><h3 id="Inductor"><a class="docs-heading-anchor" href="#Inductor">Inductor</a><a id="Inductor-1"></a><a class="docs-heading-anchor-permalink" href="#Inductor" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.Inductor" href="#Sims.Lib.Inductor"><code>Sims.Lib.Inductor</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The linear inductor connects the branch voltage <code>v</code> with the branch current <code>i</code> by <code>v = L * di/dt</code>. </p><pre><code class="language-julia">Inductor(n1::ElectricalNode, n2::ElectricalNode; L::Signal)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>L::Signal</code> : Inductance [H]</li></ul><p><strong>Details</strong></p><p><code>L</code> can be a constant numeric value or an Unknown, meaning it can vary with time. If <code>L</code> is a constant, it may be positive, zero, or negative. If <code>L</code> is a signal, it should be greater than zero.</p><p>This device is vectorizable using array inputs for one or both of <code>n1</code> and <code>n2</code></p><p><strong>Example</strong></p><pre><code class="language-julia">function model()
    @variables n1(t)
    g = 0.0
    [
        SineVoltage(n1, g, V = 100.0)
        Resistor(n1, g, R = 3.0)
        Inductor(n1, g, L = 6.0)
    ]
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L184-L224">source</a></section></article><h3 id="SaturatingInductor"><a class="docs-heading-anchor" href="#SaturatingInductor">SaturatingInductor</a><a id="SaturatingInductor-1"></a><a class="docs-heading-anchor-permalink" href="#SaturatingInductor" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.SaturatingInductor" href="#Sims.Lib.SaturatingInductor"><code>Sims.Lib.SaturatingInductor</code></a> — <span class="docstring-category">Function</span></header><section><div><p>To be done...</p><p>SaturatingInductor as implemented in the Modelica Standard Library depends on a Discrete value that is not fixed. This is not currently supported. Only Unknowns can currently be solved during initial conditions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L234-L242">source</a></section></article><h3 id="Transformer"><a class="docs-heading-anchor" href="#Transformer">Transformer</a><a id="Transformer-1"></a><a class="docs-heading-anchor-permalink" href="#Transformer" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.Transformer" href="#Sims.Lib.Transformer"><code>Sims.Lib.Transformer</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The transformer is a two port. The left port voltage <code>v1</code>, left port current <code>i1</code>, right port voltage <code>v2</code> and right port current <code>i2</code> are connected by the following relation:</p><pre><code class="language-none">| v1 |         | L1   M  |  | i1&#39; |
|    |    =    |         |  |     |
| v2 |         | M    L2 |  | i2&#39; |</code></pre><p><code>L1</code>, <code>L2</code>, and <code>M</code> are the primary, secondary, and coupling inductances respectively.</p><pre><code class="language-julia">Transformer(p1::ElectricalNode, n1::ElectricalNode, p2::ElectricalNode, n2::ElectricalNode; 
            L1 = 1.0, L2 = 1.0, M = 1.0)</code></pre><p><strong>Arguments</strong></p><ul><li><code>p1::ElectricalNode</code> : Positive electrical node of the left port (potential <code>p1 &gt; n1</code> for positive voltage drop v1) [V]</li><li><code>n1::ElectricalNode</code> : Negative electrical node of the left port [V]</li><li><code>p2::ElectricalNode</code> : Positive electrical node of the right port (potential <code>p2 &gt; n2</code> for positive voltage drop v2) [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node of the right port [V]</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>L1::Signal</code> : Primary inductance [H]</li><li><code>L2::Signal</code> : Secondary inductance [H]</li><li><code>M::Signal</code>  : Coupling inductance [H]</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L303-L331">source</a></section></article><h3 id="EMF"><a class="docs-heading-anchor" href="#EMF">EMF</a><a id="EMF-1"></a><a class="docs-heading-anchor-permalink" href="#EMF" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.EMF" href="#Sims.Lib.EMF"><code>Sims.Lib.EMF</code></a> — <span class="docstring-category">Function</span></header><section><div><p>EMF transforms electrical energy into rotational mechanical energy. It is used as basic building block of an electrical motor. The mechanical connector <code>flange</code> can be connected to elements of the rotational library. </p><pre><code class="language-julia">EMF(n1::ElectricalNode, n2::ElectricalNode, flange::Flange,
    support_flange = 0.0, k = 1.0)
EMF(n1::ElectricalNode, n2::ElectricalNode, flange::Flange;
    support_flange = 0.0, k = 1.0)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>flange::Flange</code> : Rotational shaft</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>support_flange</code> : Support/housing of the EMF shaft </li><li><code>k</code> : Transformation coefficient [N.m/A] </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L350-L373">source</a></section></article><h2 id="Ideal"><a class="docs-heading-anchor" href="#Ideal">Ideal</a><a id="Ideal-1"></a><a class="docs-heading-anchor-permalink" href="#Ideal" title="Permalink"></a></h2><h3 id="IdealDiode"><a class="docs-heading-anchor" href="#IdealDiode">IdealDiode</a><a id="IdealDiode-1"></a><a class="docs-heading-anchor-permalink" href="#IdealDiode" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.IdealDiode" href="#Sims.Lib.IdealDiode"><code>Sims.Lib.IdealDiode</code></a> — <span class="docstring-category">Function</span></header><section><div><p>This is an ideal switch which is <strong>open</strong> (off), if it is reversed biased (voltage drop less than 0) <strong>closed</strong> (on), if it is conducting (<code>current &gt; 0</code>). This is the behaviour if all parameters are exactly zero. Note, there are circuits, where this ideal description with zero resistance and zero cinductance is not possible. In order to prevent singularities during switching, the opened diode has a small conductance <code>Gon</code> and the closed diode has a low resistance <code>Roff</code> which is default.</p><p>The parameter <code>Vknee</code> which is the forward threshold voltage, allows to displace the knee point along the <code>Gon</code>-characteristic until <code>v = Vknee</code>. </p><pre><code class="language-julia">IdealDiode(n1::ElectricalNode, n2::ElectricalNode; 
           Vknee = 0.0, Ron = 1e-5, Goff = 1e-5)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>Vknee</code> : Forward threshold voltage [V], default = 0.0</li><li><code>Ron</code> : Closed diode resistance [Ohm], default = 1.E-5</li><li><code>Goff</code> : Opened diode conductance [S], default = 1.E-5</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L401-L431">source</a></section></article><h3 id="IdealThyristor"><a class="docs-heading-anchor" href="#IdealThyristor">IdealThyristor</a><a id="IdealThyristor-1"></a><a class="docs-heading-anchor-permalink" href="#IdealThyristor" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.IdealThyristor" href="#Sims.Lib.IdealThyristor"><code>Sims.Lib.IdealThyristor</code></a> — <span class="docstring-category">Function</span></header><section><div><p>This is an ideal thyristor model which is <strong>open</strong> (off), if the voltage drop is less than 0 or <code>fire</code> is false <strong>closed</strong> (on), if the voltage drop is greater or equal 0 and <code>fire</code> is true.</p><p>This is the behaviour if all parameters are exactly zero. Note, there are circuits, where this ideal description with zero resistance and zero cinductance is not possible. In order to prevent singularities during switching, the opened thyristor has a small conductance <code>Goff</code> and the closed thyristor has a low resistance <code>Ron</code> which is default.</p><p>The parameter <code>Vknee</code> which is the forward threshold voltage, allows to displace the knee point along the <code>Goff</code>-characteristic until <code>v = Vknee</code>. </p><pre><code class="language-julia">IdealThyristor(n1::ElectricalNode, n2::ElectricalNode, fire::Discrete; 
               Vknee = 0.0, Ron = 1e-5, Goff = 1e-5)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>fire::Discrete</code> : Discrete bool variable indicating firing of the thyristor</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>Vknee</code> : Forward threshold voltage [V], default = 0.0</li><li><code>Ron</code> : Closed thyristor resistance [Ohm], default = 1.E-5</li><li><code>Goff</code> : Opened thyristor conductance [S], default = 1.E-5</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L446-L477">source</a></section></article><h3 id="IdealOpAmp"><a class="docs-heading-anchor" href="#IdealOpAmp">IdealOpAmp</a><a id="IdealOpAmp-1"></a><a class="docs-heading-anchor-permalink" href="#IdealOpAmp" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.IdealOpAmp" href="#Sims.Lib.IdealOpAmp"><code>Sims.Lib.IdealOpAmp</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The ideal OpAmp is a two-port device. The left port is fixed to <code>v1=0</code> and <code>i1=0</code> (nullator). At the right port, both any voltage <code>v2</code> and any current <code>i2</code> are possible (norator).</p><p>The ideal OpAmp with three pins is of exactly the same behaviour as the ideal OpAmp with four pins. Only the negative output pin is left out. Both the input voltage and current are fixed to zero (nullator). At the output pin both any voltage <code>v2</code> and any current <code>i2</code> are possible.</p><pre><code class="language-julia">IdealOpAmp(p1::ElectricalNode, n1::ElectricalNode, p2::ElectricalNode, n2::ElectricalNode)
IdealOpAmp(p1::ElectricalNode, n1::ElectricalNode, p2::ElectricalNode)</code></pre><p><strong>Arguments</strong></p><ul><li><code>p1::ElectricalNode</code> : Positive electrical node of the left port (potential <code>p1 &gt; n1</code> for positive voltage drop v1) [V]</li><li><code>n1::ElectricalNode</code> : Negative electrical node of the left port [V]</li><li><code>p2::ElectricalNode</code> : Positive electrical node of the right port (potential <code>p2 &gt; n2</code> for positive voltage drop v2) [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node of the right port [V], defaults to 0.0 V</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L552-L572">source</a></section></article><h3 id="IdealOpeningSwitch"><a class="docs-heading-anchor" href="#IdealOpeningSwitch">IdealOpeningSwitch</a><a id="IdealOpeningSwitch-1"></a><a class="docs-heading-anchor-permalink" href="#IdealOpeningSwitch" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.IdealOpeningSwitch" href="#Sims.Lib.IdealOpeningSwitch"><code>Sims.Lib.IdealOpeningSwitch</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The ideal opening switch has a positive pin <code>p</code> and a negative pin <code>n</code>. The switching behaviour is controlled by the input signal <code>control</code>. If control is true, pin p is not connected with negative pin n. Otherwise, pin p is connected with negative pin n.</p><p>In order to prevent singularities during switching, the opened switch has a (very low) conductance <code>Goff</code> and the closed switch has a (very low) resistance <code>Ron</code>. The limiting case is also allowed, i.e., the resistance Ron of the closed switch could be exactly zero and the conductance Goff of the open switch could be also exactly zero. Note, there are circuits, where a description with zero Ron or zero Goff is not possible.</p><pre><code class="language-julia">IdealOpeningSwitch(n1::ElectricalNode, n2::ElectricalNode, control::Discrete;
                   Ron = 1e-5, Goff = 1e-5)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>control::Discrete</code> : true =&gt; switch open, false =&gt; n1-n2 connected</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>Ron</code> : Closed switch resistance [Ohm], default = 1.E-5</li><li><code>Goff</code> : Opened switch conductance [S], default = 1.E-5</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L590-L618">source</a></section></article><h3 id="IdealClosingSwitch"><a class="docs-heading-anchor" href="#IdealClosingSwitch">IdealClosingSwitch</a><a id="IdealClosingSwitch-1"></a><a class="docs-heading-anchor-permalink" href="#IdealClosingSwitch" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.IdealClosingSwitch" href="#Sims.Lib.IdealClosingSwitch"><code>Sims.Lib.IdealClosingSwitch</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The ideal closing switch has a positive pin <code>p</code> and a negative pin <code>n</code>. The switching behaviour is controlled by input signal <code>control</code>. If control is true, pin p is connected with negative pin n. Otherwise, pin p is not connected with negative pin n.</p><p>In order to prevent singularities during switching, the opened switch has a (very low) conductance <code>Goff</code> and the closed switch has a (very low) resistance <code>Ron</code>. The limiting case is also allowed, i.e., the resistance Ron of the closed switch could be exactly zero and the conductance Goff of the open switch could be also exactly zero. Note, there are circuits, where a description with zero Ron or zero Goff is not possible.</p><pre><code class="language-julia">IdealClosingSwitch(n1::ElectricalNode, n2::ElectricalNode, control::Discrete;
                   Ron = 1e-5, Goff = 1e-5)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>control::Discrete</code> : true =&gt; n1-n2 connected, false =&gt; switch open</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>Ron</code> : Closed switch resistance [Ohm], default = 1.E-5</li><li><code>Goff</code> : Opened switch conductance [S], default = 1.E-5</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L632-L660">source</a></section></article><h3 id="ControlledIdealOpeningSwitch"><a class="docs-heading-anchor" href="#ControlledIdealOpeningSwitch">ControlledIdealOpeningSwitch</a><a id="ControlledIdealOpeningSwitch-1"></a><a class="docs-heading-anchor-permalink" href="#ControlledIdealOpeningSwitch" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.ControlledIdealOpeningSwitch" href="#Sims.Lib.ControlledIdealOpeningSwitch"><code>Sims.Lib.ControlledIdealOpeningSwitch</code></a> — <span class="docstring-category">Function</span></header><section><div><p>TBD</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L674-L676">source</a></section></article><h3 id="ControlledIdealClosingSwitch"><a class="docs-heading-anchor" href="#ControlledIdealClosingSwitch">ControlledIdealClosingSwitch</a><a id="ControlledIdealClosingSwitch-1"></a><a class="docs-heading-anchor-permalink" href="#ControlledIdealClosingSwitch" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.ControlledIdealClosingSwitch" href="#Sims.Lib.ControlledIdealClosingSwitch"><code>Sims.Lib.ControlledIdealClosingSwitch</code></a> — <span class="docstring-category">Function</span></header><section><div><p>TBD</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L693-L695">source</a></section></article><h2 id="Semiconductors"><a class="docs-heading-anchor" href="#Semiconductors">Semiconductors</a><a id="Semiconductors-1"></a><a class="docs-heading-anchor-permalink" href="#Semiconductors" title="Permalink"></a></h2><h3 id="Diode"><a class="docs-heading-anchor" href="#Diode">Diode</a><a id="Diode-1"></a><a class="docs-heading-anchor-permalink" href="#Diode" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.Diode" href="#Sims.Lib.Diode"><code>Sims.Lib.Diode</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The simple diode is a one port. It consists of the diode itself and an parallel ohmic resistance <code>R</code>. The diode formula is:</p><pre><code class="language-none">i  =  ids * ( e^(v/vt) - 1 )</code></pre><p>If the exponent <code>v/vt</code> reaches the limit <code>maxex</code>, the diode characterisic is linearly continued to avoid overflow.</p><pre><code class="language-julia">Diode(n1::ElectricalNode, n2::ElectricalNode; 
      Ids = 1e-6,  Vt = 0.04,  Maxexp = 15,  R = 1e8)
Diode(n1::ElectricalNode, n2::ElectricalNode; hp::HeatPort;
      Ids = 1e-6,  Vt = 0.04,  Maxexp = 15,  R = 1e8)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>hp::HeatPort</code> : Heat port [K]                </li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>Ids</code> : Saturation current [A], default = 1.e-6</li><li><code>Vt</code> : Voltage equivalent of temperature (kT/qn) [V], default = 0.04</li><li><code>Maxexp</code> : Max. exponent for linear continuation, default = 15.0</li><li><code>R</code> : Parallel ohmic resistance [Ohm], default = 1.e8</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L845-L873">source</a></section></article><h3 id="ZDiode"><a class="docs-heading-anchor" href="#ZDiode">ZDiode</a><a id="ZDiode-1"></a><a class="docs-heading-anchor-permalink" href="#ZDiode" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.ZDiode" href="#Sims.Lib.ZDiode"><code>Sims.Lib.ZDiode</code></a> — <span class="docstring-category">Function</span></header><section><div><p>TBD</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L891-L893">source</a></section></article><h2 id="Sources"><a class="docs-heading-anchor" href="#Sources">Sources</a><a id="Sources-1"></a><a class="docs-heading-anchor-permalink" href="#Sources" title="Permalink"></a></h2><h3 id="SignalVoltage"><a class="docs-heading-anchor" href="#SignalVoltage">SignalVoltage</a><a id="SignalVoltage-1"></a><a class="docs-heading-anchor-permalink" href="#SignalVoltage" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.SignalVoltage" href="#Sims.Lib.SignalVoltage"><code>Sims.Lib.SignalVoltage</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The signal voltage source is a parameterless converter of real valued signals into a source voltage.</p><p>This voltage source may be vectorized.</p><pre><code class="language-julia">SignalVoltage(n1::ElectricalNode, n2::ElectricalNode; V::Signal)  </code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>V::Signal</code> : Voltage between n1 and n2 (= n1 - n2) as an input signal</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L991-L1006">source</a></section></article><h3 id="SineVoltage"><a class="docs-heading-anchor" href="#SineVoltage">SineVoltage</a><a id="SineVoltage-1"></a><a class="docs-heading-anchor-permalink" href="#SineVoltage" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.SineVoltage" href="#Sims.Lib.SineVoltage"><code>Sims.Lib.SineVoltage</code></a> — <span class="docstring-category">Function</span></header><section><div><p>A sinusoidal voltage source. An offset parameter is introduced, which is added to the value calculated by the blocks source. The startTime parameter allows to shift the blocks source behavior on the time axis.</p><p>This voltage source may be vectorized.</p><pre><code class="language-julia">SineVoltage(n1::ElectricalNode, n2::ElectricalNode; 
            V = 1.0,  f = 1.0,  ang = 0.0,  offset = 0.0)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>V</code> : Amplitude of sine wave [V], default = 1.0</li><li><code>phase</code> : Phase of sine wave [rad], default = 0.0</li><li><code>freqHz</code> : Frequency of sine wave [Hz], default = 1.0</li><li><code>offset</code> : Voltage offset [V], default = 0.0</li><li><code>startTime</code> : Time offset [s], default = 0.0</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L1016-L1041">source</a></section></article><h3 id="StepVoltage"><a class="docs-heading-anchor" href="#StepVoltage">StepVoltage</a><a id="StepVoltage-1"></a><a class="docs-heading-anchor-permalink" href="#StepVoltage" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.StepVoltage" href="#Sims.Lib.StepVoltage"><code>Sims.Lib.StepVoltage</code></a> — <span class="docstring-category">Function</span></header><section><div><p>A step voltage source. An event is introduced at the transition. Probably cannot be vectorized.</p><pre><code class="language-julia">StepVoltage(n1::ElectricalNode, n2::ElectricalNode; 
            V = 1.0,  start = 0.0,  offset = 0.0)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li></ul><p><strong>Keyword/Optional Arguments</strong></p><ul><li><code>V</code> : Height of step [V], default = 1.0</li><li><code>offset</code> : Voltage offset [V], default = 0.0</li><li><code>startTime</code> : Time offset [s], default = 0.0</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L1048-L1067">source</a></section></article><h3 id="SignalCurrent"><a class="docs-heading-anchor" href="#SignalCurrent">SignalCurrent</a><a id="SignalCurrent-1"></a><a class="docs-heading-anchor-permalink" href="#SignalCurrent" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.SignalCurrent" href="#Sims.Lib.SignalCurrent"><code>Sims.Lib.SignalCurrent</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The signal current source is a parameterless converter of real valued signals into a current voltage.</p><p>This current source may be vectorized.</p><pre><code class="language-julia">SignalCurrent(n1::ElectricalNode, n2::ElectricalNode; I::Signal)  </code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>I::Signal</code> : Current flowing from n1 to n2 as an input signal</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L1082-L1097">source</a></section></article><h2 id="Utilities"><a class="docs-heading-anchor" href="#Utilities">Utilities</a><a id="Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities" title="Permalink"></a></h2><h3 id="SeriesProbe"><a class="docs-heading-anchor" href="#SeriesProbe">SeriesProbe</a><a id="SeriesProbe-1"></a><a class="docs-heading-anchor-permalink" href="#SeriesProbe" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.SeriesProbe" href="#Sims.Lib.SeriesProbe"><code>Sims.Lib.SeriesProbe</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Connect a series current probe between two nodes. This is vectorizable.</p><pre><code class="language-julia">SeriesProbe(n1, n2; name::AbstractString)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1</code> : Positive node</li><li><code>n2</code> : Negative node</li><li><code>name::AbstractString</code> : The name of the probe</li></ul><p><strong>Example</strong></p><pre><code class="language-julia">function model()
    n1 = Voltage(&quot;n1&quot;)
    n2 = Voltage()
    g = 0.0
    [
        SineVoltage(n1, g, V = 100.0)
        SeriesProbe(n1, n2, &quot;current&quot;)
        Resistor(n2, g, R = 2.0)
    ]
end
y = sim(model())</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L1116-L1145">source</a></section></article><h3 id="BranchHeatPort"><a class="docs-heading-anchor" href="#BranchHeatPort">BranchHeatPort</a><a id="BranchHeatPort-1"></a><a class="docs-heading-anchor-permalink" href="#BranchHeatPort" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Sims.Lib.BranchHeatPort" href="#Sims.Lib.BranchHeatPort"><code>Sims.Lib.BranchHeatPort</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Wrap argument <code>model</code> with a heat port that captures the power generated by the electrical device. This is vectorizable.</p><pre><code class="language-julia">BranchHeatPort(n1::ElectricalNode, n2::ElectricalNode, hp::HeatPort,
               model::Function, args...)</code></pre><p><strong>Arguments</strong></p><ul><li><code>n1::ElectricalNode</code> : Positive electrical node [V]</li><li><code>n2::ElectricalNode</code> : Negative electrical node [V]</li><li><code>hp::HeatPort</code> : Heat port [K]                </li><li><code>model::Function</code> : Model to wrap</li><li><code>args...</code> : Arguments passed to <code>model</code>  </li></ul><p><strong>Examples</strong></p><p>Here&#39;s an example of a definition defining a Resistor that uses a heat port (a Temperature) in terms of another model:</p><pre><code class="language-julia">function ResistorWithHeating(n1::ElectricalNode, n2::ElectricalNode, R::Signal, hp::Temperature; T_ref::Signal, alpha::Signal) 
    BranchHeatPort(n1, n2, hp, Resistor, R .* (1 + alpha .* (hp - T_ref)))
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tshort/Sims.jl/blob/e046814292e715083ccf870c03ce88ab788216cb/lib/electrical.jl#L1152-L1179">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../blocks/">« Control and signal blocks</a><a class="docs-footer-nextpage" href="../heat_transfer/">Heat transfer models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 5 August 2021 12:53">Thursday 5 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
